{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A,Y,C;A,M,C,c,C,c,E,Y,E;I,K,E,I;C,C,C;A,c,C,S,C,G,K,C,C;;;;;AACiD,SAAAG,wCAAAA,CAAAC,GAAA,EAAA;IAAA,OAAAC,wCAAA,CAAAD,GAAA,CAAA,IAAAE,sCAAA,CAAAF,GAAA,CAAA,IAAAG,iDAAA,CAAAH,GAAA,CAAA,IAAAI,wCAAA,EAAA,CAAA;CAAA;AAAA,SAAAA,wCAAAA,GAAA;IAAA,MAAA,IAAAC,SAAA,CAAA,sIAAA,CAAA,CAAA;CAAA;AAAA,SAAAF,iDAAAA,CAAAG,CAAA,EAAAC,MAAA,EAAA;IAAA,IAAA,CAAAD,CAAA,EAAA,OAAA;IAAA,IAAA,OAAAA,CAAA,KAAA,QAAA,EAAA,OAAAE,uCAAA,CAAAF,CAAA,EAAAC,MAAA,CAAA,CAAA;IAAA,IAAAE,CAAA,GAAAC,MAAA,CAAAC,SAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAP,CAAA,CAAA,CAAAQ,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,AAAA;IAAA,IAAAL,CAAA,KAAA,QAAA,IAAAH,CAAA,CAAAS,WAAA,EAAAN,CAAA,GAAAH,CAAA,CAAAS,WAAA,CAAAC,IAAA,CAAA;IAAA,IAAAP,CAAA,KAAA,KAAA,IAAAA,CAAA,KAAA,KAAA,EAAA,OAAAQ,KAAA,CAAAC,IAAA,CAAAZ,CAAA,CAAA,CAAA;IAAA,IAAAG,CAAA,KAAA,WAAA,IAAA,2CAAAU,IAAA,CAAAV,CAAA,CAAA,EAAA,OAAAD,uCAAA,CAAAF,CAAA,EAAAC,MAAA,CAAA,CAAA;CAAA;AAAA,SAAAL,sCAAAA,CAAAkB,IAAA,EAAA;IAAA,IAAA,OAAAC,MAAA,KAAA,WAAA,IAAAD,IAAA,CAAAC,MAAA,CAAAC,QAAA,CAAA,IAAA,IAAA,IAAAF,IAAA,CAAA,YAAA,CAAA,IAAA,IAAA,EAAA,OAAAH,KAAA,CAAAC,IAAA,CAAAE,IAAA,CAAA,CAAA;CAAA;AAAA,SAAAnB,wCAAAA,CAAAD,GAAA,EAAA;IAAA,IAAAiB,KAAA,CAAAM,OAAA,CAAAvB,GAAA,CAAA,EAAA,OAAAQ,uCAAA,CAAAR,GAAA,CAAA,CAAA;CAAA;AAAA,SAAAQ,uCAAAA,CAAAR,GAAA,EAAAwB,GAAA,EAAA;IAAA,IAAAA,GAAA,IAAA,IAAA,IAAAA,GAAA,GAAAxB,GAAA,CAAAyB,MAAA,EAAAD,GAAA,GAAAxB,GAAA,CAAAyB,MAAA,CAAA;IAAA,IAAA,IAAAC,CAAA,GAAA,CAAA,EAAAC,IAAA,GAAA,IAAAV,KAAA,CAAAO,GAAA,CAAA,EAAAE,CAAA,GAAAF,GAAA,EAAAE,CAAA,EAAA,CAAAC,IAAA,CAAAD,CAAA,CAAA,GAAA1B,GAAA,CAAA0B,CAAA,CAAA,CAAA;IAAA,OAAAC,IAAA,CAAA;CAAA;AAAA,IAAAC,8BAAA,GAElC,SAAAA,QAAAA,CAACC,KAAK,EAAEC,OAAO,EAAK;IACjC,OAAA,EAAA,CAAAC,MAAA,CAAAhC,wCAAA,CACK,AAAA,CAAA,GAAAiC,iCAA0B,CAAA,CAACH,KAAK,EAAEC,OAAO,CAAC,CAAA,EAAA/B,wCAAA,CAC1C,AAAA,CAAA,GAAAkC,qBAAc,CAAA,CAACJ,KAAK,EAAEC,OAAO,CAAC,CAFnC,CAAA,CAAA;CAID,AAAD;AAACI,cAAA,CAAA,SAAA,CAAA,GAAAN,8BAAA,CAAAM;;;;A,Y,C;A,M,C,c,C,c,E,Y,E;I,K,E,I;C,C,C;A,c,C,0B,G,K,C,C;;;ACPuF,SAAAG,6BAAAA,CAAAC,IAAA,EAAA;IAAA,yBAAA,CAAA;IAAA,OAAAD,6BAAA,GAAA,UAAA,IAAA,OAAAhB,MAAA,IAAA,QAAA,IAAA,OAAAA,MAAA,CAAAC,QAAA,GAAA,SAAAgB,GAAA,EAAA;QAAA,OAAA,OAAAA,GAAA,CAAA;KAAA,GAAA,SAAAA,GAAA,EAAA;QAAA,OAAAA,GAAA,IAAA,UAAA,IAAA,OAAAjB,MAAA,IAAAiB,GAAA,CAAAvB,WAAA,KAAAM,MAAA,IAAAiB,GAAA,KAAAjB,MAAA,CAAAV,SAAA,GAAA,QAAA,GAAA,OAAA2B,GAAA,CAAA;KAAA,EAAAD,6BAAA,CAAAC,IAAA,CAAA,CAAA;CAAA;AAAA,SAAAC,6BAAAA,CAAAC,MAAA,EAAAC,cAAA,EAAA;IAAA,IAAAC,IAAA,GAAAhC,MAAA,CAAAgC,IAAA,CAAAF,MAAA,CAAA,AAAA;IAAA,IAAA9B,MAAA,CAAAiC,qBAAA,EAAA;QAAA,IAAAC,OAAA,GAAAlC,MAAA,CAAAiC,qBAAA,CAAAH,MAAA,CAAA,AAAA;QAAAC,cAAA,IAAAG,CAAAA,OAAA,GAAAA,OAAA,CAAAC,MAAA,CAAA,SAAAC,GAAA,EAAA;YAAA,OAAApC,MAAA,CAAAqC,wBAAA,CAAAP,MAAA,EAAAM,GAAA,CAAA,CAAAE,UAAA,CAAA;SAAA,CAAA,CAAA,AAAA,EAAAN,IAAA,CAAAO,IAAA,CAAAC,KAAA,CAAAR,IAAA,EAAAE,OAAA,CAAA,CAAA;KAAA;IAAA,OAAAF,IAAA,CAAA;CAAA;AAAA,SAAAS,mCAAAA,CAAAC,MAAA,EAAA;IAAA,IAAA,IAAA1B,CAAA,GAAA,CAAA,EAAAA,CAAA,GAAA2B,SAAA,CAAA5B,MAAA,EAAAC,CAAA,EAAA,CAAA;QAAA,IAAA4B,MAAA,GAAA,IAAA,IAAAD,SAAA,CAAA3B,CAAA,CAAA,GAAA2B,SAAA,CAAA3B,CAAA,CAAA,GAAA,EAAA,AAAA;QAAAA,CAAA,GAAA,CAAA,GAAAa,6BAAA,CAAA7B,MAAA,CAAA4C,MAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAAC,OAAA,CAAA,SAAAC,GAAA,EAAA;YAAAC,qCAAA,CAAAL,MAAA,EAAAI,GAAA,EAAAF,MAAA,CAAAE,GAAA,CAAA,CAAA,CAAA;SAAA,CAAA,GAAA9C,MAAA,CAAAgD,yBAAA,GAAAhD,MAAA,CAAAiD,gBAAA,CAAAP,MAAA,EAAA1C,MAAA,CAAAgD,yBAAA,CAAAJ,MAAA,CAAA,CAAA,GAAAf,6BAAA,CAAA7B,MAAA,CAAA4C,MAAA,CAAA,CAAA,CAAAC,OAAA,CAAA,SAAAC,GAAA,EAAA;YAAA9C,MAAA,CAAAkD,cAAA,CAAAR,MAAA,EAAAI,GAAA,EAAA9C,MAAA,CAAAqC,wBAAA,CAAAO,MAAA,EAAAE,GAAA,CAAA,CAAA,CAAA;SAAA,CAAA,CAAA;KAAA;IAAA,OAAAJ,MAAA,CAAA;CAAA;AAAA,SAAAK,qCAAAA,CAAAnB,GAAA,EAAAkB,GAAA,EAAAK,KAAA,EAAA;IAAAL,GAAA,GAAAM,oCAAA,CAAAN,GAAA,CAAA,CAAA;IAAA,IAAAA,GAAA,IAAAlB,GAAA,EAAA5B,MAAA,CAAAkD,cAAA,CAAAtB,GAAA,EAAAkB,GAAA,EAAA;QAAAK,KAAA,EAAAA,KAAA;QAAAb,UAAA,EAAA,IAAA;QAAAe,YAAA,EAAA,IAAA;QAAAC,QAAA,EAAA,IAAA;KAAA,CAAA,CAAA;SAAA1B,GAAA,CAAAkB,GAAA,CAAA,GAAAK,KAAA,CAAA;IAAA,OAAAvB,GAAA,CAAA;CAAA;AAAA,SAAAwB,oCAAAA,CAAAG,GAAA,EAAA;IAAA,IAAAT,GAAA,GAAAU,kCAAA,CAAAD,GAAA,EAAA,QAAA,CAAA,AAAA;IAAA,OAAA5B,6BAAA,CAAAmB,GAAA,CAAA,KAAA,QAAA,GAAAA,GAAA,GAAAW,MAAA,CAAAX,GAAA,CAAA,CAAA;CAAA;AAAA,SAAAU,kCAAAA,CAAAE,KAAA,EAAAC,IAAA,EAAA;IAAA,IAAAhC,6BAAA,CAAA+B,KAAA,CAAA,KAAA,QAAA,IAAAA,KAAA,KAAA,IAAA,EAAA,OAAAA,KAAA,CAAA;IAAA,IAAAE,IAAA,GAAAF,KAAA,CAAA/C,MAAA,CAAAkD,WAAA,CAAA,AAAA;IAAA,IAAAD,IAAA,KAAAE,SAAA,EAAA;QAAA,IAAAC,GAAA,GAAAH,IAAA,CAAAzD,IAAA,CAAAuD,KAAA,EAAAC,IAAA,IAAA,SAAA,CAAA,AAAA;QAAA,IAAAhC,6BAAA,CAAAoC,GAAA,CAAA,KAAA,QAAA,EAAA,OAAAA,GAAA,CAAA;QAAA,MAAA,IAAApE,SAAA,CAAA,8CAAA,CAAA,CAAA;KAAA;IAAA,OAAA,AAAAgE,CAAAA,IAAA,KAAA,QAAA,GAAAF,MAAA,GAAAO,MAAA,CAAA,CAAAN,KAAA,CAAA,CAAA;CAAA;AAExF,IAAMpC,gDAA0B,GAAG,SAA7BA,0BAA0BA,CAAIH,KAAK,EAAEC,OAAO,EAAK;IACrD,IAAQ6C,QAAQ,GAAK7C,OAAO,CAApB6C,QAAQ,AAAhB;IACA,IAAQC,MAAM,GAAK/C,KAAK,CAAhB+C,MAAM,AAAd;IAEA,IAAMC,gBAAgB,GACpBF,QAAQ,KAAK,aAAa,GACtB,AAAA,CAAA,GAAAG,uBAAgB,CAAA,CAACjD,KAAK,CAAC,GACvB,AAAA,CAAA,GAAAkD,eAAc,CAAA,CAAClD,KAAK,CAAC,AAH3B;IAKAmD,OAAO,CAACC,GAAG,CAACJ,gBAAgB,CAAC,CAA7BG;IAEA,IAAME,eAAe,GAAGL,gBAAgB,CAACM,GAAG,CAAC,SAAAC,CAAC,EAAI;QAChD,IAAQC,OAAO,GAAKD,CAAC,CAAbC,OAAO,AAAf;QACA,IAAMC,OAAO,GAAGD,OAAO,CAACE,KAAK,kBAAkB,AAA/C;QACA,IAAI,CAACD,OAAO,EAAE,OAAOF,CAAC,CAAtB;QACA,IAAII,WAAW,GAAGH,OAAO,AAAzB;QACAC,OAAO,CAAC/B,OAAO,CAAC,SAAAgC,KAAK,EAAI;YACvB,IAAME,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACJ,KAAK,CAACK,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,AAA1D;YACA,IAAMC,KAAK,GAAGjB,MAAM,CAACa,UAAU,CAAC,AAAhC;YACAD,WAAW,GAAGA,WAAW,CAACM,KAAK,CAACP,KAAK,CAAC,CAACQ,IAAI,CAACF,KAAK,CAACG,EAAE,CAAC,CAArDR;SACD,CAAC,CAAF;QACA,OAAArC,mCAAA,CAAAA,mCAAA,CAAA,EAAA,EAAYiC,CAAC,CAAb,EAAA,EAAA,EAAA;YAAeC,OAAO,EAAEG,WAATH;SAAoB,CAAA,CAAA;KACpC,CAAC,AAAF;IAEA,OAAOH,eAAe,CAAtB;CACD,AAAD;AAAEhD,cAAA,CAAAF,0BAAA,GAAAA,gDAAA,CAAAE;;;;;A,Y,C;A,M,C,c,C,c,E,Y,E;I,K,E,I;C,C,C;A,c,C,c,G,c,C,a,G,K,C,C;;;ACrBwC,SAAAnC,wCAAAA,CAAAC,GAAA,EAAA;IAAA,OAAAC,wCAAA,CAAAD,GAAA,CAAA,IAAAE,sCAAA,CAAAF,GAAA,CAAA,IAAAG,iDAAA,CAAAH,GAAA,CAAA,IAAAI,wCAAA,EAAA,CAAA;CAAA;AAAA,SAAAA,wCAAAA,GAAA;IAAA,MAAA,IAAAC,SAAA,CAAA,sIAAA,CAAA,CAAA;CAAA;AAAA,SAAAF,iDAAAA,CAAAG,CAAA,EAAAC,MAAA,EAAA;IAAA,IAAA,CAAAD,CAAA,EAAA,OAAA;IAAA,IAAA,OAAAA,CAAA,KAAA,QAAA,EAAA,OAAAE,uCAAA,CAAAF,CAAA,EAAAC,MAAA,CAAA,CAAA;IAAA,IAAAE,CAAA,GAAAC,MAAA,CAAAC,SAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAP,CAAA,CAAA,CAAAQ,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,AAAA;IAAA,IAAAL,CAAA,KAAA,QAAA,IAAAH,CAAA,CAAAS,WAAA,EAAAN,CAAA,GAAAH,CAAA,CAAAS,WAAA,CAAAC,IAAA,CAAA;IAAA,IAAAP,CAAA,KAAA,KAAA,IAAAA,CAAA,KAAA,KAAA,EAAA,OAAAQ,KAAA,CAAAC,IAAA,CAAAZ,CAAA,CAAA,CAAA;IAAA,IAAAG,CAAA,KAAA,WAAA,IAAA,2CAAAU,IAAA,CAAAV,CAAA,CAAA,EAAA,OAAAD,uCAAA,CAAAF,CAAA,EAAAC,MAAA,CAAA,CAAA;CAAA;AAAA,SAAAL,sCAAAA,CAAAkB,IAAA,EAAA;IAAA,IAAA,OAAAC,MAAA,KAAA,WAAA,IAAAD,IAAA,CAAAC,MAAA,CAAAC,QAAA,CAAA,IAAA,IAAA,IAAAF,IAAA,CAAA,YAAA,CAAA,IAAA,IAAA,EAAA,OAAAH,KAAA,CAAAC,IAAA,CAAAE,IAAA,CAAA,CAAA;CAAA;AAAA,SAAAnB,wCAAAA,CAAAD,GAAA,EAAA;IAAA,IAAAiB,KAAA,CAAAM,OAAA,CAAAvB,GAAA,CAAA,EAAA,OAAAQ,uCAAA,CAAAR,GAAA,CAAA,CAAA;CAAA;AAAA,SAAAQ,uCAAAA,CAAAR,GAAA,EAAAwB,GAAA,EAAA;IAAA,IAAAA,GAAA,IAAA,IAAA,IAAAA,GAAA,GAAAxB,GAAA,CAAAyB,MAAA,EAAAD,GAAA,GAAAxB,GAAA,CAAAyB,MAAA,CAAA;IAAA,IAAA,IAAAC,CAAA,GAAA,CAAA,EAAAC,IAAA,GAAA,IAAAV,KAAA,CAAAO,GAAA,CAAA,EAAAE,CAAA,GAAAF,GAAA,EAAAE,CAAA,EAAA,CAAAC,IAAA,CAAAD,CAAA,CAAA,GAAA1B,GAAA,CAAA0B,CAAA,CAAA,CAAA;IAAA,OAAAC,IAAA,CAAA;CAAA;AAE1C;;;;;GAKA,CACA,IAAMsE,oCAAc,GAAG,SAAjBA,cAAcA,CAAIC,IAAI,EAAEpE,OAAO,EAAK;IACxC,IAAQ6C,QAAQ,GAAK7C,OAAO,CAApB6C,QAAQ,AAAhB;IACA,IAAMwB,MAAM,GAAGxB,QAAQ,KAAK,aAAa,GAAGyB,cAAc,GAAGC,aAA7D;IAEA,IAAIC,WAAW,GAAGH,MAAM,CAACD,IAAI,CAAC,CAC3Bf,GAAG,CAAC,SAAAoB,SAAS,EADhB;QACgB,OAAI7F,MAAM,CAACgC,IAAI,CAACyD,MAAM,CAACI,SAAS,CAAC,CAAC,CAAlC;KAAkC,CAAC,CAChDC,IAAI,CAAC,CAAC,CAAC,AADwC;IAElD,OAAOvF,KAAK,CAACC,IAAI,CAAC,IAAIuF,GAAG,CAACH,WAAW,CAAC,CAAC,CAAvC;CACD,AAAD;AAEA;;;;;;;GAOA,CACA,IAAMI,iDAA2B,GAAG,SAA9BA,2BAA2BA,CAAIb,KAAK,EAAEc,GAAG,EAAET,IAAI,EAAEpE,OAAO,EAAK;IACjE,IAAQ6C,QAAQ,GAAK7C,OAAO,CAApB6C,QAAQ,AAAhB;IAEA,IAAMiC,eAAe,GACnBjC,QAAQ,KAAK,aAAa,GACtBkC,uBAAuB,GACvBC,sBAHN;IAKA,OAAOpG,MAAM,CAACgC,IAAI,CAACmD,KAAK,CAAC,CACtBhD,MAAM,CAAC,SAAAW,GAAG,EADb;QACa,OAAImD,GAAG,CAACI,QAAQ,CAACvD,GAAG,CAAC,CAArB;KAAqB,CAAC,CAChC2B,GAAG,CACF,SAAA3B,GAAG,EAF2B;QAE3B,OACD,IAAIoD,eAAe,CACjBf,KAAK,CAACG,EAAE,EACRH,KAAK,CAACrC,GAAG,CAAC,EAAA,YAAA,CAAAzB,MAAA,CACGyB,GAAG,EAAA,0CAAA,CAAA,CAAAzB,MAAA,CAA2CmE,IAAI,CAAA,CAChE,CALA;KAKA,CACJ,CADI;CAER,AAAD;AAEA,IAAMc,sDAAgC,GAAG,SAAnCA,gCAAgCA,CAAInB,KAAK,EAAE/D,OAAO,EAAK;IAC3D,IAAMmF,eAAe,GAAGhB,oCAAc,CAAC,OAAO,EAAEnE,OAAO,CAAC,AAAxD;IACA,OAAO4E,iDAA2B,CAACb,KAAK,EAAEoB,eAAe,EAAE,OAAO,EAAEnF,OAAO,CAAC,CAA5E;CACD,AAAD;AAEA,IAAMoF,uDAAiC,GAAG,SAApCA,iCAAiCA,CAAIrB,KAAK,EAAE/D,OAAO,EAAK;IAC5D,IAAMqF,gBAAgB,GAAGlB,oCAAc,CAAC,QAAQ,EAAEnE,OAAO,CAAC,AAA1D;IACA,OAAO4E,iDAA2B,CAChCb,KAAK,EACLsB,gBAAgB,EAChB,QAAQ,EACRrF,OAAO,CACR,CALD;CAMD,AAAD;AAEO,IAAMsF,mCAAa,GAAG,SAAhBA,aAAaA,CAAIvB,KAAK,EAAE/D,OAAO,EAAK;IAC/C,OAAA,EAAA,CAAAC,MAAA,CAAAhC,wCAAA,CACKmH,uDAAiC,CAACrB,KAAK,EAAE/D,OAAO,CAAC,CAAA,EAAA/B,wCAAA,CACjDiH,sDAAgC,CAACnB,KAAK,EAAE/D,OAAO,CAAC,CAFrD,CAAA,CAAA;CAID,AAAD;AAAEI,cAAA,CAAAkF,aAAA,GAAAA,mCAAA,CAAAlF;AAEK,IAAMD,oCAAc,GAAG,SAAjBA,cAAcA,CAAIJ,KAAK,EAAEC,OAAO,EAAK;IAChD,IAAI,CAACD,KAAK,CAAC+C,MAAM,EAAE,OAAO,EAAE,CAA5B;IACA,OAAO/C,KAAK,CAAC+C,MAAM,CAACO,GAAG,CAAC,SAAAkC,CAAC,EAAzB;QAAyB,OAAID,mCAAa,CAACC,CAAC,EAAEvF,OAAO,CAAC,CAA7B;KAA6B,CAAC,CAAC0E,IAAI,CAACc,QAAQ,CAAC,CAAhB;CACvD,AAAD;AAAEpF,cAAA,CAAAD,cAAA,GAAAA,oCAAA,CAAAC;;;;;;A,Y,C;A,M,C,c,C,yB,E,Y,E;I,K,E,I;C,C,C;A,M,C,c,C,yB,E,M,E;I,U,E,I;I,G,E,S,G,G;Q,O,2B,C,S,C,C;K;C,C,C;;AC9EF,IAAAqF,2BAAA,GAAAC,4CAAA,CAAA3H,wBAAA,CAAA,AAAA;AAA8B,SAAA2H,4CAAAA,CAAAlF,GAAA,EAAA;IAAA,OAAAA,GAAA,IAAAA,GAAA,CAAAmF,UAAA,GAAAnF,GAAA,GAAA;QAAA,SAAA,EAAAA,GAAA;KAAA,CAAA;CAAA","sources":["src/lib/lint.js","src/lib/formatted-style-spec-validate.js","src/lib/lint-layer.js","src/index.js"],"sourcesContent":["import { formattedStyleSpecValidate } from './formatted-style-spec-validate';\nimport { validateLayers } from './lint-layer.js';\n\nexport default (style, options) => {\n  return [\n    ...formattedStyleSpecValidate(style, options),\n    ...validateLayers(style, options)\n  ];\n};\n","import { validate as validateMapbox } from '@mapbox/mapbox-gl-style-spec';\nimport { validateStyleMin as validateMaplibre } from '@maplibre/maplibre-gl-style-spec';\n\nconst formattedStyleSpecValidate = (style, options) => {\n  const { renderer } = options;\n  const { layers } = style;\n\n  const validationErrors =\n    renderer === 'maplibre-gl'\n      ? validateMaplibre(style)\n      : validateMapbox(style);\n\n  console.log(validationErrors);\n\n  const formattedErrors = validationErrors.map(e => {\n    const { message } = e;\n    const matches = message.match(/layers\\[\\d+\\]/g);\n    if (!matches) return e;\n    let nextMessage = message;\n    matches.forEach(match => {\n      const layerIndex = JSON.parse(match.replace('layers', ''));\n      const layer = layers[layerIndex];\n      nextMessage = nextMessage.split(match).join(layer.id);\n    });\n    return { ...e, message: nextMessage };\n  });\n\n  return formattedErrors;\n};\n\nexport { formattedStyleSpecValidate };\n","import {\n  latest as mapboxLatest,\n  ValidationError as MapboxValidationError\n} from '@mapbox/mapbox-gl-style-spec';\nimport {\n  latest as maplibreLatest,\n  ValidationError as MaplibreValidationError\n} from '@maplibre/maplibre-gl-style-spec';\n\n/**\n * getPropertyIds\n * Get property ids for either `paint` or `layout` properties\n * @param {string} type - `paint` or `layout`\n * @returns {string[]} - property ids for the given type\n */\nconst getPropertyIds = (type, options) => {\n  const { renderer } = options;\n  const latest = renderer === 'maplibre-gl' ? maplibreLatest : mapboxLatest;\n\n  let propertyIds = latest[type]\n    .map(layerType => Object.keys(latest[layerType]))\n    .flat(1);\n  return Array.from(new Set(propertyIds));\n};\n\n/**\n * validateMisplacedProperties\n * Find property ids at the top level of a layer that should not be there\n * @param {Object} layer - a layer object from a style\n * @param {string[]} ids - property ids to look for\n * @param {string} type - `paint` or `layout`\n * @returns {ValidationError[]} - an error for each id found, if any\n */\nconst validateMisplacedProperties = (layer, ids, type, options) => {\n  const { renderer } = options;\n\n  const ValidationError =\n    renderer === 'maplibre-gl'\n      ? MaplibreValidationError\n      : MapboxValidationError;\n\n  return Object.keys(layer)\n    .filter(key => ids.includes(key))\n    .map(\n      key =>\n        new ValidationError(\n          layer.id,\n          layer[key],\n          `contains '${key}' at the top level, but it should be in ${type}`\n        )\n    );\n};\n\nconst validateMisplacedPaintProperties = (layer, options) => {\n  const paintProperties = getPropertyIds('paint', options);\n  return validateMisplacedProperties(layer, paintProperties, 'paint', options);\n};\n\nconst validateMisplacedLayoutProperties = (layer, options) => {\n  const layoutProperties = getPropertyIds('layout', options);\n  return validateMisplacedProperties(\n    layer,\n    layoutProperties,\n    'layout',\n    options\n  );\n};\n\nexport const validateLayer = (layer, options) => {\n  return [\n    ...validateMisplacedLayoutProperties(layer, options),\n    ...validateMisplacedPaintProperties(layer, options)\n  ];\n};\n\nexport const validateLayers = (style, options) => {\n  if (!style.layers) return [];\n  return style.layers.map(l => validateLayer(l, options)).flat(Infinity);\n};\n","import lint from \"./lib/lint\";\n\nexport { lint };\n"],"names":["_formattedStyleSpecValidate","require","_lintLayer","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","_default","style","options","concat","formattedStyleSpecValidate","validateLayers","exports","_mapboxGlStyleSpec","_maplibreGlStyleSpec","_typeof","obj","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","renderer","layers","validationErrors","validateMaplibre","validateMapbox","console","log","formattedErrors","map","e","message","matches","match","nextMessage","layerIndex","JSON","parse","replace","layer","split","join","id","getPropertyIds","type","latest","maplibreLatest","mapboxLatest","propertyIds","layerType","flat","Set","validateMisplacedProperties","ids","ValidationError","MaplibreValidationError","MapboxValidationError","includes","validateMisplacedPaintProperties","paintProperties","validateMisplacedLayoutProperties","layoutProperties","validateLayer","l","Infinity","_lint","_interopRequireDefault","__esModule"],"version":3,"file":"module.js.map"}